
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>工作進度追蹤系統</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 10px; background: #f5f5f5; }
    h2 { color: #2c3e50; font-size: 1.5em; }
    table { width: 100%; border-collapse: collapse; background: #fff; font-size: 0.95em; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #ecf0f1; }
    td[contenteditable="true"] { background-color: #fdfdfd; }
    .progress-bar { height: 16px; background: #ddd; border-radius: 5px; overflow: hidden; }
    .fill { height: 100%; background: #4caf50; width: 0%; transition: width 0.4s; }
    .add-task { margin-top: 15px; text-align: center; }
    button { padding: 8px 16px; background: #3498db; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 1em; }
    button:hover { background: #2980b9; }
    @media screen and (max-width: 600px) {
      table, thead, tbody, th, td, tr { display: block; width: 100%; }
      tr { margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
      th { display: none; }
      td { text-align: left; padding: 10px; border: none; border-bottom: 1px solid #eee; }
    }
  </style>
</head>
<body>

<h2>工作進度追蹤表</h2>

<table id="taskTable">
  <thead>
    <tr>
      <th>任務名稱</th>
      <th>負責人</th>
      <th>進度</th>
      <th>進度條</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<div class="add-task">
  <button onclick="addTask()">➕ 新增任務</button>
</div>

<script>
  function updateProgress(select) {
    const fill = select.parentElement.nextElementSibling.querySelector('.fill');
    fill.style.width = select.value + '%';
    saveData();
  }

  function addTask(task = '', owner = '', progress = 0) {
    const table = document.getElementById('taskTable').getElementsByTagName('tbody')[0];
    const row = table.insertRow();
    const taskCell = row.insertCell(0);
    const ownerCell = row.insertCell(1);
    const progressCell = row.insertCell(2);
    const barCell = row.insertCell(3);

    taskCell.contentEditable = "true";
    ownerCell.contentEditable = "true";

    const select = document.createElement("select");
    [0, 25, 50, 75, 100].forEach(p => {
      const option = document.createElement("option");
      option.value = p;
      option.text = p + "%";
      if (p == progress) option.selected = true;
      select.appendChild(option);
    });
    select.onchange = function () { updateProgress(this); };
    progressCell.appendChild(select);

    const bar = document.createElement("div");
    bar.className = "progress-bar";
    const fill = document.createElement("div");
    fill.className = "fill";
    fill.style.width = progress + '%';
    bar.appendChild(fill);
    barCell.appendChild(bar);

    taskCell.oninput = ownerCell.oninput = saveData;
  }

  function saveData() {
    const rows = document.querySelectorAll("#taskTable tbody tr");
    const data = Array.from(rows).map(row => ({
      task: row.cells[0].innerText,
      owner: row.cells[1].innerText,
      progress: row.cells[2].querySelector("select").value
    }));
    localStorage.setItem("taskData", JSON.stringify(data));
  }

  function loadData() {
    const data = JSON.parse(localStorage.getItem("taskData") || "[]");
    data.forEach(item => addTask(item.task, item.owner, item.progress));
    if (data.length === 0) addTask("首頁設計", "小明", 50);
  }

  window.onload = loadData;
</script>

</body>
</html>
